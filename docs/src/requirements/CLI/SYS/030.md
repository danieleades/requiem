---
_version: '1'
uuid: 47212541-c5be-49c6-ba6a-50c874abf128
created: 2025-11-20T12:10:02.219594696Z
---
# CLI-SYS-030 Sync Command Enhancement

## Statement

The tool shall enhance the existing sync command (currently 'clean') with a --what flag to control what is synchronized.

## Scope

The sync command updates metadata after manual changes. The --what flag specifies:

- parents (default): Update parent HRIDs in children after renames
- paths: Move ALL files to canonical locations per path mode  
- all: Both parents and paths

Additional flags:
- --check: Check for drift without updating (exit 2 if found)
- --dry-run: Show what would change without changing
- --quiet: Suppress output
- --yes: Skip confirmation prompts

## Verification

- Default 'req sync' behavior is 'req sync --what parents'
- 'req sync --what paths' moves files to canonical locations with confirmation
- 'req sync --what all' performs both synchronizations in sequence
- --check flag reports drift and exits with code 2 if found
- --dry-run shows preview without making changes
- Path synchronization creates missing directories
- Command renamed from 'clean' to 'sync' with deprecation alias
