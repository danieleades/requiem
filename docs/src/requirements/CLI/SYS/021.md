---
_version: '1'
uuid: ac723321-7356-4653-ab48-90be0359c906
created: 2025-11-14T08:33:36.093512287Z
parents:
- uuid: 2540b2c1-ea21-4732-aafb-ee1c836ca19b
  fingerprint: 48b7581de764f722643227578388c9d970bf45d1bf98f1209d79cc1061619f81
  hrid: CORE-USR-003
---
# CLI-SYS-021 HRID Correction Command (Sync)

## Statement

The tool shall provide a `req sync` command that corrects outdated parent HRIDs in requirement files when parent requirements have been moved or renamed.

## Rationale

When requirements are reorganized or renumbered, the parent HRID references stored in child requirement frontmatter can become stale. While UUIDs remain stable and maintain link integrity, the HRID mismatch makes manual review and navigation confusing. An automated correction command ensures HRID references stay synchronized without requiring manual updates to potentially hundreds of files.

This supports USR-003's goal of maintaining traceability by keeping human-readable references accurate.

## Implementation Notes

- Command name is `req sync`; no legacy alias required
- Enhanced with --what flag to control synchronization scope (see SYS-030)
- Default behavior: `req sync` is equivalent to `req sync --what parents`
- Scans all requirements in the repository
- For each parent link, compares stored HRID against current parent's HRID
- Updates HRID field if mismatch detected (UUID must match)
- Preserves UUID and fingerprint fields
- Reports number of corrections made
- Safe operation: only updates HRID field, never changes relationships
- Implemented in `src/cli.rs` lines 207-214

## Verification

- Command successfully updates outdated parent HRIDs
- UUIDs and fingerprints remain unchanged
- Reports accurate count of corrections
- No-op when all HRIDs are current
- Handles requirements with multiple parents correctly
- Does not create false suspect links
