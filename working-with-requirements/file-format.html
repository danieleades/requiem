<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Requirement File Format - Requiem User Guide</title>


        <!-- Custom HTML head -->

        <meta name="description" content="A comprehensive guide to plain-text requirements management with Requiem">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Requiem User Guide</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/danieleades/requirements-manager" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/danieleades/requirements-manager/edit/main/docs/src/working-with-requirements/file-format.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="requirement-file-format"><a class="header" href="#requirement-file-format">Requirement File Format</a></h1>
<p>Requiem requirements are stored as markdown files with YAML frontmatter. This chapter explains the format in detail.</p>
<h2 id="file-structure"><a class="header" href="#file-structure">File Structure</a></h2>
<p>A requirement file has two parts:</p>
<ol>
<li><strong>YAML Frontmatter</strong> - Metadata enclosed in <code>---</code> delimiters</li>
<li><strong>Markdown Body</strong> - The requirement text</li>
</ol>
<h3 id="example"><a class="header" href="#example">Example</a></h3>
<pre><code class="language-markdown">---
_version: '1'
uuid: 4bfeb7d5-d168-44a7-b0f1-e292c1c89b9a
created: 2025-07-22T12:19:56.950194157Z
parents:
- uuid: 3fc6800c-5acc-457e-baf9-a29b42b663fd
  fingerprint: c4020419ead000e9b5f9cfd4ebf6192e73f905c27e6897548d8f6e12fd7f1356
  hrid: USR-001
---

The system shall validate user email addresses according to RFC 5322.

Email validation must occur before account creation.
</code></pre>
<h2 id="yaml-frontmatter"><a class="header" href="#yaml-frontmatter">YAML Frontmatter</a></h2>
<p>The frontmatter contains structured metadata.</p>
<h3 id="required-fields"><a class="header" href="#required-fields">Required Fields</a></h3>
<h4 id="_version"><a class="header" href="#_version"><code>_version</code></a></h4>
<pre><code class="language-yaml">_version: '1'
</code></pre>
<p><strong>Purpose</strong>: Format version for future compatibility.</p>
<p><strong>Value</strong>: Currently always <code>'1'</code> (quoted string).</p>
<p><strong>Why it matters</strong>: If Requiem's file format evolves, this field allows newer versions to handle older files correctly.</p>
<h4 id="uuid"><a class="header" href="#uuid"><code>uuid</code></a></h4>
<pre><code class="language-yaml">uuid: 4bfeb7d5-d168-44a7-b0f1-e292c1c89b9a
</code></pre>
<p><strong>Purpose</strong>: Globally unique, stable identifier.</p>
<p><strong>Value</strong>: UUIDv4 (automatically generated by <code>req add</code>).</p>
<p><strong>Why it matters</strong>: This never changes, even if the requirement is renumbered. Parent-child relationships use UUIDs, ensuring links remain valid.</p>
<h4 id="created"><a class="header" href="#created"><code>created</code></a></h4>
<pre><code class="language-yaml">created: 2025-07-22T12:19:56.950194157Z
</code></pre>
<p><strong>Purpose</strong>: Timestamp of requirement creation.</p>
<p><strong>Value</strong>: ISO 8601 format with timezone (always UTC).</p>
<p><strong>Why it matters</strong>: Provides audit trail and helps understand requirement evolution.</p>
<h3 id="optional-fields"><a class="header" href="#optional-fields">Optional Fields</a></h3>
<h4 id="parents"><a class="header" href="#parents"><code>parents</code></a></h4>
<pre><code class="language-yaml">parents:
- uuid: 3fc6800c-5acc-457e-baf9-a29b42b663fd
  fingerprint: c4020419ead000e9b5f9cfd4ebf6192e73f905c27e6897548d8f6e12fd7f1356
  hrid: USR-001
- uuid: 7a8f9e2b-1c3d-4e5f-6a7b-8c9d0e1f2a3b
  fingerprint: a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456
  hrid: USR-003
</code></pre>
<p><strong>Purpose</strong>: Links to parent (upstream) requirements.</p>
<p><strong>Value</strong>: List of parent objects, each containing:</p>
<ul>
<li><code>uuid</code> - Parent's stable identifier</li>
<li><code>fingerprint</code> - SHA256 hash of parent's content</li>
<li><code>hrid</code> - Parent's human-readable ID (for convenience)</li>
</ul>
<p><strong>Why it matters</strong>: Establishes traceability. Multiple parents are supported.</p>
<p><strong>Note</strong>: This field is absent if the requirement has no parents (e.g., top-level user requirements).</p>
<h4 id="tags-planned"><a class="header" href="#tags-planned"><code>tags</code> (planned)</a></h4>
<pre><code class="language-yaml">tags:
- security
- authentication
- high-priority
</code></pre>
<p><strong>Purpose</strong>: Categorize and filter requirements.</p>
<p><strong>Status</strong>: The data structure supports tags, but there are no CLI commands to manage them yet. You can manually add tags to the YAML.</p>
<p><strong>Future</strong>: Commands like <code>req tag add USR-001 security</code> will manage tags.</p>
<h2 id="markdown-body"><a class="header" href="#markdown-body">Markdown Body</a></h2>
<p>The body contains the actual requirement text, written in Markdown.</p>
<h3 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h3>
<h4 id="use-clear-language"><a class="header" href="#use-clear-language">Use Clear Language</a></h4>
<pre><code class="language-markdown"># Good
The system shall validate email addresses before account creation.

# Less clear
Email validation is performed.
</code></pre>
<p>Use "shall" for mandatory requirements, "should" for recommended, "may" for optional.</p>
<h4 id="one-concept-per-requirement"><a class="header" href="#one-concept-per-requirement">One Concept Per Requirement</a></h4>
<pre><code class="language-markdown"># Bad (multiple concepts)
The system shall validate emails and passwords and usernames.

# Good (split into separate requirements)
# USR-001.md
The system shall validate email addresses.

# USR-002.md
The system shall validate passwords for minimum strength.

# USR-003.md
The system shall validate usernames for uniqueness.
</code></pre>
<h4 id="be-testable"><a class="header" href="#be-testable">Be Testable</a></h4>
<pre><code class="language-markdown"># Bad (not testable)
The system shall be fast.

# Good (testable)
The system shall respond to login requests within 200ms at the 95th percentile.
</code></pre>
<h4 id="include-context"><a class="header" href="#include-context">Include Context</a></h4>
<pre><code class="language-markdown">The system shall hash passwords using bcrypt with a cost factor of 12.

Rationale: Bcrypt is resistant to GPU-based attacks. Cost factor 12 provides
security while maintaining acceptable login performance (&lt; 200ms).
</code></pre>
<h3 id="markdown-features"><a class="header" href="#markdown-features">Markdown Features</a></h3>
<p>You can use any Markdown syntax:</p>
<h4 id="headings"><a class="header" href="#headings">Headings</a></h4>
<pre><code class="language-markdown">## Rationale

The requirement exists because...

## Acceptance Criteria

- Criterion 1
- Criterion 2
</code></pre>
<h4 id="lists"><a class="header" href="#lists">Lists</a></h4>
<pre><code class="language-markdown">The system shall support the following authentication methods:

1. Username and password
2. OAuth (Google, GitHub)
3. SAML SSO
</code></pre>
<h4 id="code-blocks"><a class="header" href="#code-blocks">Code Blocks</a></h4>
<pre><code class="language-markdown">Example API response:

\`\`\`json
{
  "user_id": "4bfeb7d5-d168-44a7-b0f1-e292c1c89b9a",
  "email": "user@example.com"
}
\`\`\`
</code></pre>
<h4 id="emphasis"><a class="header" href="#emphasis">Emphasis</a></h4>
<pre><code class="language-markdown">The system **shall** validate emails. It *should* provide helpful error messages.
</code></pre>
<h2 id="filename-convention"><a class="header" href="#filename-convention">Filename Convention</a></h2>
<p>Filenames must match the requirement's HRID:</p>
<pre><code>USR-001.md
SYS-042.md
COMPONENT-SUBCOMPONENT-SWR-123.md
</code></pre>
<p><strong>Case sensitive</strong>: <code>USR-001.md</code> and <code>usr-001.md</code> are different files (though the latter won't be recognized as a requirement).</p>
<p><strong>Extension</strong>: Must be <code>.md</code>.</p>
<p>If the filename doesn't match the HRID format, Requiem will:</p>
<ul>
<li>Ignore the file (if <code>allow_unrecognised = true</code> in config)</li>
<li>Return an error (if <code>allow_unrecognised = false</code>, the default)</li>
</ul>
<h2 id="parsing-rules"><a class="header" href="#parsing-rules">Parsing Rules</a></h2>
<h3 id="frontmatter-delimiters"><a class="header" href="#frontmatter-delimiters">Frontmatter Delimiters</a></h3>
<p>The YAML frontmatter must:</p>
<ul>
<li>Start with <code>---</code> on the first line</li>
<li>End with <code>---</code> on a line by itself</li>
<li>Contain valid YAML</li>
</ul>
<pre><code class="language-markdown">---
_version: '1'
uuid: 4bfeb7d5-d168-44a7-b0f1-e292c1c89b9a
created: 2025-07-22T12:19:56.950194157Z
---

Requirement text here...
</code></pre>
<h3 id="whitespace"><a class="header" href="#whitespace">Whitespace</a></h3>
<ul>
<li>Leading/trailing whitespace in the body is preserved</li>
<li>Empty lines between frontmatter and body are ignored</li>
</ul>
<pre><code class="language-markdown">---
...frontmatter...
---


This is the first line of the body (empty lines above are ignored).
</code></pre>
<h2 id="editing-requirements"><a class="header" href="#editing-requirements">Editing Requirements</a></h2>
<h3 id="manual-editing"><a class="header" href="#manual-editing">Manual Editing</a></h3>
<p>You can edit requirements with any text editor:</p>
<pre><code class="language-bash">vim USR-001.md
code SYS-042.md
nano TST-003.md
</code></pre>
<p><strong>Caution</strong>: Don't modify the <code>uuid</code> field! This would break traceability.</p>
<p><strong>Safe to edit</strong>:</p>
<ul>
<li>The markdown body (requirement text)</li>
<li>Tags (if present)</li>
</ul>
<p><strong>Requiem manages</strong> (don't edit manually):</p>
<ul>
<li><code>created</code> timestamp</li>
<li>Parent <code>fingerprint</code> fields (updated by linking commands)</li>
</ul>
<h3 id="using-scripts"><a class="header" href="#using-scripts">Using Scripts</a></h3>
<p>Since requirements are plain text, you can process them with scripts:</p>
<pre><code class="language-python"># Add a tag to all USR requirements
import re
import glob

for filename in glob.glob("USR-*.md"):
    with open(filename, 'r') as f:
        content = f.read()

    # Add tag to frontmatter
    content = content.replace(
        "---\n",
        "---\ntags:\n- user-facing\n",
        1  # Only first occurrence
    )

    with open(filename, 'w') as f:
        f.write(content)
</code></pre>
<p><strong>Caution</strong>: Ensure scripts preserve YAML validity. Invalid YAML will cause parsing errors.</p>
<h2 id="validation"><a class="header" href="#validation">Validation</a></h2>
<p>Requiem validates requirements when loading:</p>
<pre><code class="language-bash">req clean  # Loads all requirements, reports errors
</code></pre>
<p>Common validation errors:</p>
<ul>
<li><strong>Invalid YAML</strong>: Syntax errors in frontmatter</li>
<li><strong>Missing required fields</strong>: No <code>uuid</code>, <code>created</code>, or <code>_version</code></li>
<li><strong>Invalid UUID</strong>: Malformed UUID string</li>
<li><strong>Invalid timestamp</strong>: Malformed ISO 8601 date</li>
<li><strong>Duplicate UUIDs</strong>: Two requirements with the same UUID (serious error!)</li>
</ul>
<h2 id="file-format-evolution"><a class="header" href="#file-format-evolution">File Format Evolution</a></h2>
<p>The <code>_version</code> field allows future format changes:</p>
<p><strong>Version 1</strong> (current):</p>
<ul>
<li>Fields: <code>_version</code>, <code>uuid</code>, <code>created</code>, <code>parents</code>, <code>tags</code></li>
<li>Parents include UUID, fingerprint, and HRID</li>
</ul>
<p><strong>Version 2</strong> (hypothetical future):</p>
<ul>
<li>Might add: <code>status</code>, <code>priority</code>, <code>owner</code></li>
<li>Older Requiem versions can still read V1 files</li>
</ul>
<h2 id="real-world-examples"><a class="header" href="#real-world-examples">Real-World Examples</a></h2>
<p>Want to see actual requirement files following this format? Browse the <a href="../requirements.html">Example Project</a> which contains 21 real requirements used by Requiem itself:</p>
<ul>
<li><a href="../requirements/USR-001.html">USR-001: Plain Text Storage</a> - Simple user requirement</li>
<li><a href="../requirements/SYS-001.html">SYS-001: Markdown File Format with YAML Frontmatter</a> - System requirement with parent link</li>
</ul>
<p>These demonstrate the file format in practice with proper frontmatter, parent links, and well-structured content.</p>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<p>Now that you understand the file format, learn about <a href="./hrids.html">Human-Readable IDs (HRIDs)</a> and their syntax rules.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../working-with-requirements.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../working-with-requirements/hrids.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../working-with-requirements.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../working-with-requirements/hrids.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
